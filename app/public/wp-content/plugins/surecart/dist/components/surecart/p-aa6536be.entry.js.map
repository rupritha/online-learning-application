{"version":3,"names":["scProductPriceCss","ScProductPriceStyle0","ScProductPrice","renderRange","_a","state","this","productId","range_display_amount","renderVariantPrice","selectedVariant","variant","_b","variants","find","id","renderPrice","selectedPrice","price","originalAmount","display_amount","amount","_c","upsellState","line_item","total_amount","upsellDisplayAmount","_d","total_display_amount","displayAmount","scratchAmount","_e","scratch_amount","upsellScratchDisplayAmount","_f","subtotal_display_amount","scratchDisplayAmount","scratch_display_amount","h","currency","saleText","adHoc","ad_hoc","trialDurationDays","trial_duration_days","setupFeeText","setup_fee_text","setupFeeAmount","setup_fee_enabled","setup_fee_amount","setupFeeName","setup_fee_name","recurringPeriodCount","recurring_period_count","recurringInterval","recurring_interval","recurringIntervalCount","recurring_interval_count","render","Host","key","role","prices","length"],"sources":["src/components/controllers/product/sc-product-price/sc-product-price.scss?tag=sc-product-price&encapsulation=shadow","src/components/controllers/product/sc-product-price/sc-product-price.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","/**\n * External dependencies.\n */\nimport { Component, h, Prop, Host } from '@stencil/core';\nimport { __, _n } from '@wordpress/i18n';\n\n/**\n * Internal dependencies.\n */\nimport { state } from '@store/product';\nimport { state as upsellState } from '@store/upsell';\nimport { Price, Variant } from '../../../../types';\n\n@Component({\n  tag: 'sc-product-price',\n  styleUrl: 'sc-product-price.scss',\n  shadow: true,\n})\nexport class ScProductPrice {\n  /** The product's prices. */\n  @Prop() prices: Price[];\n\n  /** The sale text */\n  @Prop() saleText: string;\n\n  /** The product id */\n  @Prop() productId: string;\n\n  renderRange() {\n    return state[this.productId]?.range_display_amount;\n  }\n\n  renderVariantPrice(selectedVariant: Variant) {\n    const variant = state[this.productId]?.variants?.find(variant => variant?.id === selectedVariant?.id);\n    return this.renderPrice(state[this.productId].selectedPrice, variant);\n  }\n\n  renderPrice(price: Price, variant: Variant = null) {\n    const originalAmount = variant?.display_amount ?? price?.display_amount ?? '';\n\n    // maybe change for upsells.\n    const amount = upsellState?.line_item?.total_amount || price?.amount;\n    const upsellDisplayAmount = upsellState?.line_item?.total_display_amount;\n    const displayAmount = upsellDisplayAmount ? upsellDisplayAmount : originalAmount;\n\n    const scratchAmount = upsellState?.line_item?.scratch_amount || price?.scratch_amount;\n    const upsellScratchDisplayAmount = upsellState?.line_item?.subtotal_display_amount;\n    const scratchDisplayAmount = upsellScratchDisplayAmount ? upsellScratchDisplayAmount : price?.scratch_display_amount;\n\n    return (\n      <sc-price\n        currency={price?.currency}\n        amount={amount}\n        displayAmount={displayAmount}\n        scratchAmount={scratchAmount}\n        scratchDisplayAmount={scratchDisplayAmount}\n        saleText={this.saleText}\n        adHoc={price?.ad_hoc}\n        trialDurationDays={price?.trial_duration_days}\n        setupFeeText={price?.setup_fee_text}\n        setupFeeAmount={price?.setup_fee_enabled ? price?.setup_fee_amount : null}\n        setupFeeName={price?.setup_fee_enabled ? price?.setup_fee_name : null}\n        recurringPeriodCount={price?.recurring_period_count}\n        recurringInterval={price?.recurring_interval}\n        recurringIntervalCount={price?.recurring_interval_count}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <Host role=\"paragraph\">\n        {(() => {\n          if (state[this.productId]?.selectedVariant) {\n            return this.renderVariantPrice(state[this.productId]?.selectedVariant);\n          }\n\n          if (state[this.productId]?.selectedPrice) {\n            return this.renderPrice(state[this.productId].selectedPrice);\n          }\n\n          if (state[this.productId]?.prices?.length) {\n            return this.renderRange();\n          }\n\n          return <slot />;\n        })()}\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}