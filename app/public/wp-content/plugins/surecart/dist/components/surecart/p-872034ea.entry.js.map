{"version":3,"names":["scLineItemsCss","ScLineItemsStyle0","ScLineItems","isEditable","item","_a","price","ad_hoc","bump_amount","locked","this","editable","render","formBusy","_c","_b","checkoutState","checkout","line_items","data","length","h","style","width","height","slot","display","sortedItems","_e","_d","sort","a","b","aHasSwap","is_swappable","bHasSwap","class","part","tabindex","map","max","getMaxStockQuantity","product","variant","key","id","image","name","variant_display_options","fees","amount","ad_hoc_display_amount","subtotal_display_amount","scratch","scratch_display_amount","trial","_f","trial_text","interval","_g","short_interval_text","_h","short_interval_count_text","quantity","purchasableStatus","purchasable_status_display","removable","onScUpdateQuantity","e","updateCheckoutLineItem","detail","onScRemove","removeCheckoutLineItem","exportparts","lineItem"],"sources":["src/components/controllers/checkout-form/line-items/sc-line-items.scss?tag=sc-line-items&encapsulation=shadow","src/components/controllers/checkout-form/line-items/sc-line-items.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\n:slotted(* ~ *) {\n  margin-top: 20px;\n}\n\n.line-items {\n  display: grid;\n  gap: var(--sc-form-row-spacing);\n}\n\n.line-item {\n  display: grid;\n  gap: var(--sc-spacing-small);\n\n  &--has-swap {\n    border: 1px solid var(--sc-input-border-color);\n    background: var(--sc-card-background-color, var(--sc-color-white));\n    border-radius: var(--sc-border-radius-medium);\n    gap: 0;\n    border-radius: var(--sc-input-border-radius-medium);\n    overflow: hidden;\n\n    sc-product-line-item {\n      padding: var(--sc-spacing-medium);\n      border-bottom: solid var(--sc-input-border-width) var(--sc-input-border-color);\n    }\n\n    sc-swap {\n      padding: var(--sc-spacing-medium);\n      background: var(--sc-card-background-color, var(--sc-color-gray-50));\n    }\n  }\n}\n\nsc-swap {\n  font-size: var(--sc-font-size-small);\n  line-height: var(--sc-line-height-dense);\n  color: var(--sc-input-label-color);\n}\n\n.fee__description {\n  opacity: 0.75;\n}\n","import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\n\nimport { state as checkoutState } from '@store/checkout';\nimport { LineItem, Product, Variant } from '../../../../types';\nimport { removeCheckoutLineItem, updateCheckoutLineItem } from '@store/checkout/mutations';\nimport { formBusy } from '@store/form/getters';\nimport { getMaxStockQuantity } from '../../../../functions/quantity';\n\n/**\n * @part base - The component base\n * @part line-item - The line item\n * @part product-line-item - The product line item\n * @part line-item__image - The line item image\n * @part line-item__text - The line item text\n * @part line-item__title - The line item title\n * @part line-item__suffix - The line item suffix\n * @part line-item__price - The line item price\n * @part line-item__price-amount - The line item price amount\n * @part line-item__price-description - The line item price description\n * @part line-item__price-scratch - The line item price scratch\n * @part line-item__static-quantity - The line item static quantity\n * @part line-item__remove-icon - The line item remove icon\n * @part line-item__quantity - The line item quantity\n * @part line-item__quantity-minus - The line item quantity minus\n * @part line-item__quantity-minus-icon - The line item quantity minus icon\n * @part line-item__quantity-plus - The line item quantity plus\n * @part line-item__quantity-plus-icon - The line item quantity plus icon\n * @part line-item__quantity-input - The line item quantity input\n * @part line-item__price-description - The line item price description\n */\n\n@Component({\n  tag: 'sc-line-items',\n  styleUrl: 'sc-line-items.scss',\n  shadow: true,\n})\nexport class ScLineItems {\n  /**\n   * Is the line item editable?\n   */\n  @Prop() editable: boolean;\n\n  /**\n   * Is the line item removable?\n   */\n  @Prop() removable: boolean;\n\n  /**\n   * Is the line item editable?\n   */\n  isEditable(item: LineItem) {\n    // ad_hoc prices and bumps cannot have quantity.\n    if (item?.price?.ad_hoc || item?.bump_amount || item?.locked) {\n      return false;\n    }\n    return this.editable;\n  }\n\n  render() {\n    if (!!formBusy() && !checkoutState?.checkout?.line_items?.data?.length) {\n      return (\n        <sc-line-item>\n          <sc-skeleton style={{ 'width': '50px', 'height': '50px', '--border-radius': '0' }} slot=\"image\"></sc-skeleton>\n          <sc-skeleton slot=\"title\" style={{ width: '120px', display: 'inline-block' }}></sc-skeleton>\n          <sc-skeleton slot=\"description\" style={{ width: '60px', display: 'inline-block' }}></sc-skeleton>\n          <sc-skeleton style={{ width: '120px', display: 'inline-block' }} slot=\"price\"></sc-skeleton>\n          <sc-skeleton style={{ width: '60px', display: 'inline-block' }} slot=\"price-description\"></sc-skeleton>\n        </sc-line-item>\n      );\n    }\n\n    // Sort items so that items with swaps are at the top.\n    const sortedItems = (checkoutState?.checkout?.line_items?.data || []).sort((a, b) => {\n      const aHasSwap = a?.is_swappable ? 1 : 0;\n      const bHasSwap = b?.is_swappable ? 1 : 0;\n      return bHasSwap - aHasSwap;\n    });\n\n    return (\n      <div class=\"line-items\" part=\"base\" tabindex=\"0\">\n        {sortedItems.map(item => {\n          const max = getMaxStockQuantity(item?.price?.product as Product, item?.variant as Variant);\n          return (\n            <div class={`line-item ${item?.is_swappable ? 'line-item--has-swap' : ''}`}>\n              <sc-product-line-item\n                key={item.id}\n                image={item?.image}\n                name={(item?.price?.product as Product)?.name}\n                price={item?.price?.name}\n                variant={item?.variant_display_options}\n                fees={item?.fees?.data}\n                amount={item.ad_hoc_display_amount ? item.ad_hoc_display_amount : item.subtotal_display_amount}\n                scratch={item.ad_hoc_display_amount ? null : item?.scratch_display_amount}\n                trial={item?.price?.trial_text}\n                interval={`${item?.price?.short_interval_text} ${item?.price?.short_interval_count_text}`}\n                quantity={item.quantity}\n                purchasableStatus={item?.purchasable_status_display}\n                {...(max ? { max } : {})}\n                editable={this.isEditable(item)}\n                removable={!item?.locked && this.removable}\n                onScUpdateQuantity={e => updateCheckoutLineItem({ id: item.id, data: { quantity: e.detail } })}\n                onScRemove={() => removeCheckoutLineItem(item?.id)}\n                exportparts=\"base:line-item, product-line-item, image:line-item__image, placeholder__image: line-item__placeholder-image, text:line-item__text, title:line-item__title, suffix:line-item__suffix, price:line-item__price, price__amount:line-item__price-amount, price__description:line-item__price-description, price__scratch:line-item__price-scratch, static-quantity:line-item__static-quantity, remove-icon__base:line-item__remove-icon, quantity:line-item__quantity, quantity__minus:line-item__quantity-minus, quantity__minus-icon:line-item__quantity-minus-icon, quantity__plus:line-item__quantity-plus, quantity__plus-icon:line-item__quantity-plus-icon, quantity__input:line-item__quantity-input, line-item__price-description:line-item__price-description\"\n              />\n              <sc-swap lineItem={item} />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}