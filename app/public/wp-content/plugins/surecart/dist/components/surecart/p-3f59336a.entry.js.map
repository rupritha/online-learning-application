{"version":3,"names":["scSwapCss","ScSwapStyle0","ScSwap","onSwapToggleChange","e","updateFormState","checkoutState","checkout","toggleSwap","id","_a","this","lineItem","action","target","checked","createErrorNotice","message","console","error","render","is_swappable","swap","_b","_d","_c","price","current_swap","swap_price","h","class","_e","onScChange","description","display_amount","short_interval_text","short_interval_count_text"],"sources":["src/components/controllers/checkout-form/sc-swap/sc-swap.scss?tag=sc-swap&encapsulation=shadow","src/components/controllers/checkout-form/sc-swap/sc-swap.tsx"],"sourcesContent":[".swap {\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n\n  &__price {\n    color: var(--sc-swap-price-color, var(--sc-input-label-color));\n    line-height: var(--sc-line-height-dense);\n    font-size: var(--sc-font-size-small);\n    white-space: nowrap;\n  }\n}\n","import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { LineItem, Price } from '../../../../types';\nimport { state as checkoutState } from '@store/checkout';\nimport { toggleSwap } from '@services/session';\nimport { updateFormState } from '@store/form/mutations';\nimport { createErrorNotice } from '@store/notices/mutations';\n\n@Component({\n  tag: 'sc-swap',\n  styleUrl: 'sc-swap.scss',\n  shadow: true,\n})\nexport class ScSwap {\n  /** The product id. */\n  @Prop() lineItem: LineItem;\n\n  async onSwapToggleChange(e) {\n    try {\n      updateFormState('FETCH');\n      checkoutState.checkout = await toggleSwap({ id: this.lineItem?.id, action: e.target.checked ? 'swap' : 'unswap' });\n      updateFormState('RESOLVE');\n    } catch (e) {\n      updateFormState('REJECT');\n      createErrorNotice(e.message);\n      console.error(e);\n    }\n  }\n\n  render() {\n    if (!this?.lineItem?.is_swappable) {\n      return null;\n    }\n\n    const swap = this?.lineItem?.swap || this?.lineItem?.price?.current_swap;\n    const price = (swap?.swap_price as Price) || this.lineItem.price;\n\n    return (\n      <div class=\"swap\">\n        <sc-switch checked={!!this?.lineItem?.swap} onScChange={e => this.onSwapToggleChange(e)}>\n          {swap?.description}\n        </sc-switch>\n        {!!price?.display_amount && (\n          <div class=\"swap__price\">\n            {price?.display_amount} {price?.short_interval_text} {price?.short_interval_count_text}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"mappings":"8YAAA,MAAMA,EAAY,mPAClB,MAAAC,EAAeD,E,MCYFE,EAAM,M,iDAIjB,wBAAMC,CAAmBC,G,MACvB,IACEC,EAAgB,SAChBC,EAAcC,eAAiBC,EAAW,CAAEC,IAAIC,EAAAC,KAAKC,YAAQ,MAAAF,SAAA,SAAAA,EAAED,GAAII,OAAQT,EAAEU,OAAOC,QAAU,OAAS,WACvGV,EAAgB,U,CAChB,MAAOD,GACPC,EAAgB,UAChBW,EAAkBZ,EAAEa,SACpBC,QAAQC,MAAMf,E,EAIlB,MAAAgB,G,cACE,MAAKV,EAAAC,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAF,SAAA,SAAAA,EAAEW,cAAc,CACjC,OAAO,I,CAGT,MAAMC,IAAOC,EAAAZ,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAW,SAAA,SAAAA,EAAED,SAAQE,GAAAC,EAAAd,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAa,SAAA,SAAAA,EAAEC,SAAK,MAAAF,SAAA,SAAAA,EAAEG,cAC5D,MAAMD,GAASJ,IAAI,MAAJA,SAAI,SAAJA,EAAMM,aAAwBjB,KAAKC,SAASc,MAE3D,OACEG,EAAA,OAAKC,MAAM,QACTD,EAAA,aAAWd,YAAWgB,EAAApB,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAmB,SAAA,SAAAA,EAAET,MAAMU,WAAY5B,GAAKO,KAAKR,mBAAmBC,IAClFkB,IAAI,MAAJA,SAAI,SAAJA,EAAMW,gBAENP,IAAK,MAALA,SAAK,SAALA,EAAOQ,iBACRL,EAAA,OAAKC,MAAM,eACRJ,IAAK,MAALA,SAAK,SAALA,EAAOQ,eAAc,IAAGR,IAAK,MAALA,SAAK,SAALA,EAAOS,oBAAmB,IAAGT,IAAK,MAALA,SAAK,SAALA,EAAOU,2B","ignoreList":[]}