{"file":"sc-swap2.js","mappings":";;;;;;;AAAA,MAAM,SAAS,GAAG,kPAAkP,CAAC;AACrQ,qBAAe,SAAS;;MCYX,MAAM;;;;;;;IAIjB,MAAM,kBAAkB,CAAC,CAAC;;QACxB,IAAI;YACF,eAAe,CAAC,OAAO,CAAC,CAAC;YACzBA,KAAa,CAAC,QAAQ,GAAG,MAAM,UAAU,CAAC,EAAE,EAAE,EAAE,MAAA,IAAI,CAAC,QAAQ,0CAAE,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,GAAG,MAAM,GAAG,QAAQ,EAAE,CAAC,CAAC;YACnH,eAAe,CAAC,SAAS,CAAC,CAAC;SAC5B;QAAC,OAAO,CAAC,EAAE;YACV,eAAe,CAAC,QAAQ,CAAC,CAAC;YAC1B,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;YAC7B,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SAClB;KACF;IAED,MAAM;;QACJ,IAAI,EAAC,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,YAAY,CAAA,EAAE;YACjC,OAAO,IAAI,CAAC;SACb;QAED,MAAM,IAAI,GAAG,CAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,IAAI,MAAI,MAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,KAAK,0CAAE,YAAY,CAAA,CAAC;QACzE,MAAM,KAAK,GAAG,CAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,UAAoB,KAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;QAEjE,QACE,WAAK,KAAK,EAAC,MAAM,IACf,iBAAW,OAAO,EAAE,CAAC,EAAC,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,IAAI,CAAA,EAAE,UAAU,EAAE,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,IACpF,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,WAAW,CACR,EACX,CAAC,EAAC,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,cAAc,CAAA,KACtB,WAAK,KAAK,EAAC,aAAa,IACrB,KAAK,aAAL,KAAK;YAAL,KAAK,CAAE,cAAc,OAAG,KAAK,aAAL,KAAK;YAAL,KAAK,CAAE,mBAAmB,OAAG,KAAK,aAAL,KAAK;YAAL,KAAK,CAAE,yBAAyB,CAClF,CACP,CACG,EACN;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["checkoutState"],"sources":["src/components/controllers/checkout-form/sc-swap/sc-swap.scss?tag=sc-swap&encapsulation=shadow","src/components/controllers/checkout-form/sc-swap/sc-swap.tsx"],"sourcesContent":[".swap {\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n\n  &__price {\n    color: var(--sc-swap-price-color, var(--sc-input-label-color));\n    line-height: var(--sc-line-height-dense);\n    font-size: var(--sc-font-size-small);\n    white-space: nowrap;\n  }\n}\n","import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { LineItem, Price } from '../../../../types';\nimport { state as checkoutState } from '@store/checkout';\nimport { toggleSwap } from '@services/session';\nimport { updateFormState } from '@store/form/mutations';\nimport { createErrorNotice } from '@store/notices/mutations';\n\n@Component({\n  tag: 'sc-swap',\n  styleUrl: 'sc-swap.scss',\n  shadow: true,\n})\nexport class ScSwap {\n  /** The product id. */\n  @Prop() lineItem: LineItem;\n\n  async onSwapToggleChange(e) {\n    try {\n      updateFormState('FETCH');\n      checkoutState.checkout = await toggleSwap({ id: this.lineItem?.id, action: e.target.checked ? 'swap' : 'unswap' });\n      updateFormState('RESOLVE');\n    } catch (e) {\n      updateFormState('REJECT');\n      createErrorNotice(e.message);\n      console.error(e);\n    }\n  }\n\n  render() {\n    if (!this?.lineItem?.is_swappable) {\n      return null;\n    }\n\n    const swap = this?.lineItem?.swap || this?.lineItem?.price?.current_swap;\n    const price = (swap?.swap_price as Price) || this.lineItem.price;\n\n    return (\n      <div class=\"swap\">\n        <sc-switch checked={!!this?.lineItem?.swap} onScChange={e => this.onSwapToggleChange(e)}>\n          {swap?.description}\n        </sc-switch>\n        {!!price?.display_amount && (\n          <div class=\"swap__price\">\n            {price?.display_amount} {price?.short_interval_text} {price?.short_interval_count_text}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"version":3}