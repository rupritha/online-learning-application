{"version":3,"file":"sc-swap.js","sourceRoot":"","sources":["../../../../../src/components/controllers/checkout-form/sc-swap/sc-swap.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AAGnD,OAAO,EAAE,KAAK,IAAI,aAAa,EAAE,MAAM,iBAAiB,CAAC;AACzD,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAC/C,OAAO,EAAE,eAAe,EAAE,MAAM,uBAAuB,CAAC;AACxD,OAAO,EAAE,iBAAiB,EAAE,MAAM,0BAA0B,CAAC;AAO7D,MAAM,OAAO,MAAM;;;;IAIjB,KAAK,CAAC,kBAAkB,CAAC,CAAC;;QACxB,IAAI,CAAC;YACH,eAAe,CAAC,OAAO,CAAC,CAAC;YACzB,aAAa,CAAC,QAAQ,GAAG,MAAM,UAAU,CAAC,EAAE,EAAE,EAAE,MAAA,IAAI,CAAC,QAAQ,0CAAE,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;YACnH,eAAe,CAAC,SAAS,CAAC,CAAC;QAC7B,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,eAAe,CAAC,QAAQ,CAAC,CAAC;YAC1B,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;YAC7B,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACnB,CAAC;IACH,CAAC;IAED,MAAM;;QACJ,IAAI,CAAC,CAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,YAAY,CAAA,EAAE,CAAC;YAClC,OAAO,IAAI,CAAC;QACd,CAAC;QAED,MAAM,IAAI,GAAG,CAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,IAAI,MAAI,MAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,KAAK,0CAAE,YAAY,CAAA,CAAC;QACzE,MAAM,KAAK,GAAG,CAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,UAAoB,KAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;QAEjE,OAAO,CACL,WAAK,KAAK,EAAC,MAAM;YACf,iBAAW,OAAO,EAAE,CAAC,CAAC,CAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,0CAAE,IAAI,CAAA,EAAE,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,IACpF,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,WAAW,CACR;YACX,CAAC,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,cAAc,CAAA,IAAI,CAC1B,WAAK,KAAK,EAAC,aAAa,IACrB,KAAK,aAAL,KAAK;gBAAL,KAAK,CAAE,cAAc;qBAAG,KAAK,aAAL,KAAK;gBAAL,KAAK,CAAE,mBAAmB;qBAAG,KAAK,aAAL,KAAK;gBAAL,KAAK,CAAE,yBAAyB,CAClF,CACP,CACG,CACP,CAAC;IACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { LineItem, Price } from '../../../../types';\nimport { state as checkoutState } from '@store/checkout';\nimport { toggleSwap } from '@services/session';\nimport { updateFormState } from '@store/form/mutations';\nimport { createErrorNotice } from '@store/notices/mutations';\n\n@Component({\n  tag: 'sc-swap',\n  styleUrl: 'sc-swap.scss',\n  shadow: true,\n})\nexport class ScSwap {\n  /** The product id. */\n  @Prop() lineItem: LineItem;\n\n  async onSwapToggleChange(e) {\n    try {\n      updateFormState('FETCH');\n      checkoutState.checkout = await toggleSwap({ id: this.lineItem?.id, action: e.target.checked ? 'swap' : 'unswap' });\n      updateFormState('RESOLVE');\n    } catch (e) {\n      updateFormState('REJECT');\n      createErrorNotice(e.message);\n      console.error(e);\n    }\n  }\n\n  render() {\n    if (!this?.lineItem?.is_swappable) {\n      return null;\n    }\n\n    const swap = this?.lineItem?.swap || this?.lineItem?.price?.current_swap;\n    const price = (swap?.swap_price as Price) || this.lineItem.price;\n\n    return (\n      <div class=\"swap\">\n        <sc-switch checked={!!this?.lineItem?.swap} onScChange={e => this.onSwapToggleChange(e)}>\n          {swap?.description}\n        </sc-switch>\n        {!!price?.display_amount && (\n          <div class=\"swap__price\">\n            {price?.display_amount} {price?.short_interval_text} {price?.short_interval_count_text}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]}